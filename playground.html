<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TWM Chor Police - Playground</title>

    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive.css">
    <!-- <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"> -->
    <style>
        body{
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="game-canvas">

        <div id="topbar">
            <div class="flex-console" id="chor-side">
                <a href="#" class="chat" id="chor-chat">
                    <img src="images/Icons/chatblue.webp" class="chaticon"/>
                </a>
                <div id="heart">
                    <span class="lifecount" id="chorlife">2</span>
                </div>
                <div class="console">
                    <div class="stats">
                        <div class="score-bar">
                            <span class="title">CHORR</span>
                            <span class="score runs">0</span>
                            <span class="score">-</span>
                            <span class="score wickets">0</span>
                            <span class="title">AHMED</span>
                        </div>
                        <div class="circle"><img src="images/Icons/Plus_icon.webp" alt=""></div>
                    </div>
                    <div class="box">
                        <div id="chor-top" class="top-border"></div>
                        <div id="chor-bottom" class="bottom-border"></div>
                        <div id="chor-left" class="left"></div>
                        <div id="chor-right" class="right"></div>
                    </div>
                </div>
            </div>

            <div class="coins-counter">
                <span id="coin-count">1120</span>
            </div>

            <div class="flex-console" id="police-side">
                <div class="console">
                    <div class="box">
                        <div id="police-top" class="top-border"></div>
                        <div id="police-bottom" class="bottom-border"></div>
                        <div id="police-left" class="left"></div>
                        <div id="police-right" class="right"></div>
                    </div>
                    <div class="stats">
                        <div class="score-bar">
                            <span class="title">POLICE</span>
                            <span class="score runs">0</span>
                            <span class="score">-</span>
                            <span class="score wickets">0</span>
                            <span class="title">GEORGE</span>
                        </div>
                        <div class="circle"><img src="images/Icons/Plus_icon.webp" alt=""></div>
                    </div>
                </div>
                <div id="heart">
                    <span class="lifecount" id="policelife">2</span>
                </div>
                <a href="#" class="chat" id="police-chat">
                    <img src="images/Icons/chatblue.webp" class="chaticon"/>
                </a> 
            </div>   
        </div>

        <div id="boxes">
            <!-- <a href="#" id="stonebox">
                
            </a> -->
            <img src="images/Boxes/Stone Box.webp" alt="box" id="stone" onclick="startConfetti();" class="floating-box animatebox" data-aos="zoom-in">
            <img src="images/Boxes/Silver.webp" alt="box" id="silver" onclick="startConfetti();" class="floating-box animatebox" data-aos="zoom-in">
            <img src="images/Boxes/Gold.webp" alt="box" id="gold" onclick="startConfetti();" class="floating-box animatebox" data-aos="zoom-in">
            <img src="images/Boxes/Platinum.webp" alt="box" id="platinum" onclick="startConfetti();" class="floating-box animatebox" data-aos="zoom-in">
            <img src="images/Boxes/Diamond.webp" alt="box" id="diamond" onclick="startConfetti();" class="floating-box animatebox" data-aos="zoom-in">
        </div>

        <div class="progress">
            <div class="progress-value"></div>
        </div>

        <div class="message-modal" id="chorChatBox">
            <div class="emoji-bar">
                <a href="#" class="emoji cmoji">ğŸ˜„</a>
                <a href="#" class="emoji cmoji">ğŸ¥°</a>
                <a href="#" class="emoji cmoji">ğŸ¥³</a>
                <a href="#" class="emoji cmoji">ğŸ™ƒ</a>
                <a href="#" class="emoji cmoji">ğŸ˜‚</a>
                <a href="#" class="emoji cmoji">ğŸ˜</a>
                <a href="#" class="emoji cmoji">ğŸ¤£</a>
                <a href="#" class="emoji cmoji">ğŸ˜</a>
                <a href="#" class="emoji cmoji">ğŸ¤“</a>
                <a href="#" class="emoji cmoji">ğŸ¤¨</a>
                <a href="#" class="emoji cmoji">ğŸ¤¬</a>
                <a href="#" class="emoji cmoji">ğŸ˜¤</a>
                <a href="#" class="emoji cmoji">ğŸ™„</a>
                <a href="#" class="emoji cmoji">ğŸ˜ˆ</a>
                <a href="#" class="emoji cmoji">ğŸ¤‘</a>
            </div>
            <div class="messages">
                <a href="#" class="message c-msg">You, tough guy, stop Playing!</a>
                <a href="#" class="message c-msg">Asshole, Youâ€™re breaking the law!</a>
                <a href="#" class="message c-msg">You have your last chance!</a>
                <a href="#" class="message c-msg">Come on wise guy, give it a shot.</a>
                <a href="#" class="message c-msg">Hope for your sake that I don't succeed!</a>
                <a href="#" class="message c-msg">Don't make me angry!</a>
                <a href="#" class="message c-msg">You're going nowhere</a>
                <a href="#" class="message c-msg">My play will definitely "loosen" you up.</a>
                <a href="#" class="message c-msg">Youâ€™re screwed, pal!</a>
                <a href="#" class="message c-msg">Welcome to the shitstorm, pal.</a>
                <a href="#" class="message c-msg">Okay, we're done. Calm down now.</a>
                <a href="#" class="message c-msg">I give up! Relax, relax.</a>
                <a href="#" class="message c-msg">Thatâ€™s the best you got?</a>
                <a href="#" class="message c-msg">Your time is up, man. Mine? it's only just begun.</a>
                <a href="#" class="message c-msg">You thought you were going to be lucky this time, didn't you?</a>
            </div>
        </div>
        
        <div class="message-modal" id="policeChatBox">
            <div class="emoji-bar">
                <a href="#" class="emoji pmoji">ğŸ˜„</a>
                <a href="#" class="emoji pmoji">ğŸ¥°</a>
                <a href="#" class="emoji pmoji">ğŸ¥³</a>
                <a href="#" class="emoji pmoji">ğŸ™ƒ</a>
                <a href="#" class="emoji pmoji">ğŸ˜‚</a>
                <a href="#" class="emoji pmoji">ğŸ˜</a>
                <a href="#" class="emoji pmoji">ğŸ¤£</a>
                <a href="#" class="emoji pmoji">ğŸ˜</a>
                <a href="#" class="emoji pmoji">ğŸ¤“</a>
                <a href="#" class="emoji pmoji">ğŸ¤¨</a>
                <a href="#" class="emoji pmoji">ğŸ¤¬</a>
                <a href="#" class="emoji pmoji">ğŸ˜¤</a>
                <a href="#" class="emoji pmoji">ğŸ™„</a>
                <a href="#" class="emoji pmoji">ğŸ˜ˆ</a>
                <a href="#" class="emoji pmoji">ğŸ¤‘</a>
            </div>
            <div class="messages">
                <a href="#" class="message p-msg">You, tough guy, stop Playing!</a>
                <a href="#" class="message p-msg">Asshole, Youâ€™re breaking the law!</a>
                <a href="#" class="message p-msg">You have your last chance!</a>
                <a href="#" class="message p-msg">Come on wise guy, give it a shot.</a>
                <a href="#" class="message p-msg">Hope for your sake that I don't succeed!</a>
                <a href="#" class="message p-msg">Don't make me angry!</a>
                <a href="#" class="message p-msg">You're going nowhere</a>
                <a href="#" class="message p-msg">My play will definitely "loosen" you up.</a>
                <a href="#" class="message p-msg">Youâ€™re screwed, pal!</a>
                <a href="#" class="message p-msg">Welcome to the shitstorm, pal.</a>
                <a href="#" class="message p-msg">Okay, we're done. Calm down now.</a>
                <a href="#" class="message p-msg">I give up! Relax, relax.</a>
                <a href="#" class="message p-msg">Thatâ€™s the best you got?</a>
                <a href="#" class="message p-msg">Your time is up, man. Mine? it's only just begun.</a>
                <a href="#" class="message p-msg">You thought you were going to be lucky this time, didn't you?</a>
            </div>
        </div>
        
        <div class="received chormsg hide" id="chormsg">
            <span class="msgtext" id="policesent">Message sent from police appears here  . . .</span>
        </div>
        <div class="received policemsg hide" id="policemsg">
            <span class="msgtext" id="chorsent">Message sent from chor appears here . . . </span>
        </div>

    </div>
    <div id="mobile-view">
        <div class="notice">
            <h2>Rotate your phone to Landscape Mode.</h2>
        </div>
    </div>

    <audio controls id="audioSource">
        <!-- <source src="/sounds/box-select.wav" type="audio/wav"> -->
        <source src="/sounds/box-select.mp3" type="audio/mp3">
        <!-- <source src="/sounds/box-select.m4a" type="audio/m4a"> -->
        Your browser does not support the audio element.
    </audio>
</body>

<script src="confetti.js"></script>
<!-- 
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
    AOS.init();
</script> -->

<script src="https://code.jquery.com/jquery-2.2.4.js"></script>

<script>

    //code to play the sound
    function playSound () {
        document.getElementById("audioSource").play();
    }

    /* code for slider */
    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');
            if (decodeURIComponent(pair[0]) == variable) {
                return decodeURIComponent(pair[1]);
            }
        }
        console.log('Query variable %s not found', variable);
    }


    //code to apply dynamic background
    var path = 'images/Backgrounds/';
    var filename = getQueryVariable('filename');
    var url = path+filename;
    var canvas = document.getElementById('game-canvas');
    canvas.style.backgroundImage = `url(${url})`;


    //code to glow and fade boxes
    var box = document.querySelectorAll('floating-box');
    function glow(id)
    {
        $(".floating-box").addClass("faded");
        $(".floating-box").removeClass("animatebox");
        $(`#${id}`).removeClass("faded");
        $(`#${id}`).addClass("activebox");
        playSound();
        glow = () => {};
    }

    function stopglow()
    {
        $(".floating-box").addClass("faded");
        $(".floating-box").removeClass("animatebox");
    }

    $("#stone").click(function() {
        glow('stone');
    });
    $("#silver").click(function() {
        glow('silver');
    });
    $("#gold").click(function() {
        glow('gold');
    });
    $("#platinum").click(function() {
        glow('platinum');
    });
    $("#diamond").click(function() {
        glow('diamond');
    });

    function reglow()
    {
        stopConfetti();
        $(".floating-box").removeClass("faded");
        $(".floating-box").removeClass("activebox");
        $(".floating-box").addClass("animatebox");
    }

    function interv () {
        glow = (id) =>{
            $(".floating-box").addClass("faded");
            $(".floating-box").removeClass("animatebox");
            $(`#${id}`).removeClass("faded");
            $(`#${id}`).addClass("activebox");
            playSound();
            glow = () => {};
        };
        reglow();
    }

    $(function () {
        setInterval(interv, 15000);
    });


    //code for chor and police timer
    function addChorTimer() {
        $('#chor-top').addClass('borderanimate');
        $('#chor-bottom').addClass('borderanimate');
        $('#chor-left').addClass('borderanimate');
        $('#chor-right').addClass('borderanimate');
    }

    $(function () {
        setInterval(addChorTimer, 0);
    });

    function addPoliceTimer() {
        $('#police-top').addClass('borderanimate');
        $('#police-bottom').addClass('borderanimate');
        $('#police-left').addClass('borderanimate');
        $('#police-right').addClass('borderanimate');
    }

    $(function () {
        setInterval(addPoliceTimer, 15000);
    });


    //code for chat functionality
    var cMessages = document.getElementsByClassName('c-msg');
    for(i = 0; i<cMessages.length; i++) {
        cMessages[i].onclick = function(){
            var clickedMessage = this.innerHTML;
            $('#policemsg').removeClass('hide');
            $('#policemsg').addClass('msganimate');
            $('#chorsent').html(clickedMessage);
            console.log(clickedMessage);
        }
    }
    var cReactions = document.getElementsByClassName('cmoji');
    for(i = 0; i<cReactions.length; i++) {
        cReactions[i].onclick = function(){
            var clickedMessage = this.innerHTML;
            $('#policemsg').removeClass('hide');
            $('#policemsg').addClass('msganimate');
            $('#chorsent').html(clickedMessage);
            console.log(clickedMessage);
        }
    }

    var pMessages = document.getElementsByClassName('p-msg');
    for(i = 0; i<pMessages.length; i++) {
        pMessages[i].onclick = function(){
            var clickedMessage = this.innerHTML;
            $('#chormsg').removeClass('hide');
            $('#chormsg').addClass('msganimate');
            $('#policesent').html(clickedMessage);
            console.log(clickedMessage);
        }
    }
    var pReactions = document.getElementsByClassName('pmoji');
    for(i = 0; i<pReactions.length; i++) {
        pReactions[i].onclick = function(){
            var clickedMessage = this.innerHTML;
            $('#chormsg').removeClass('hide');
            $('#chormsg').addClass('msganimate');
            $('#policesent').html(clickedMessage);
            console.log(clickedMessage);
        }
    }

    $('#chor-chat').click(function () {
        $('#policeChatBox').removeClass('modal-right');
        $('#policemsg').addClass('hide');
        $('#chorChatBox').toggleClass('modal-left');
    });
    $('#police-chat').click(function () {
        $('#chorChatBox').removeClass('modal-left');
        $('#chormsg').addClass('hide');
        $('#policeChatBox').toggleClass('modal-right');
    });

</script>
</html> 